import asyncio
import logging
from aiogram import F
from aiogram import Bot, Dispatcher
from aiogram.filters import Command
from aiogram.types import BotCommand, BotCommandScopeDefault
from aiogram.types import Message, CallbackQuery, ReplyKeyboardRemove
from aiogram.fsm.context import FSMContext
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.types import KeyboardButton, ReplyKeyboardMarkup
from environs import Env
from dataclasses import dataclass
from aiogram.fsm.state import StatesGroup, State


vacancy_job_text = ("<b>Lavozimi vazifalari:</b>\n"
                      "â€¢ Kassada to'lovlarni qabul qilish va mijozlar bilan hisob-kitoblarni amalga oshirish;\n"
                      "â€¢ Har bir kassadan o'tayotgan tovarlarni skanerlash.\n"
                      "â€¢ Kassani toza saqlash.\n"
                      "<b>Talablar:</b>\n"
                      "â€¢ Yoshi: 18 yoshdan;\n"
                      "â€¢ Diqqat, xushmuomalalik, stressga qarshilik;\n"
                      "â€¢ Hisoblash qobiliyatlari.\n"
                      "<b>Ish sharoitlari:</b>\n"
                      "â€¢ Bonuslar;\n"
                      "â€¢ Mehnat kodeksiga muvofiq ishga olamiz;\n"
                      "â€¢ Oylik ish haqini oâ€˜z vaqtida toâ€˜laymiz;\n"
                      "â€¢ Agar tajribangiz bo'lmasa ham, biz sizni ishga olamiz va o'qitamiz;\n"
                      "â€¢ Issiq ovqat\n"
                      "â€¢ Trening va darslar.\n")


class Vacancy(StatesGroup):
    start = State()
    id = State()
    job = State()
    name = State()
    age = State()
    location = State()
    phone_number = State()
    marry = State()
    is_student = State()
    language = State()
    price = State()
    image = State()
    finish = State()
    menu = State()



@dataclass
class Bots:
    bot_token: str
    admin_id: int


@dataclass
class Settings:
    bots: Bots


def get_settings(path: str):
    env = Env()
    env.read_env(path)

    return Settings(
        bots=Bots(
            bot_token='6907770905:AAFOGdqxX9-24kSVjaSDUvZBexWZoxnRXRI',
            admin_id=6907770905
        )
    )


settings = get_settings("input")
# print(settings)



start_vacancy_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Boshlash")
    ]
],
    one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang"
)

vacancy_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
],
    one_time_keyboard=True, resize_keyboard=True
)

vacancy_phone_number_keyboard = ReplyKeyboardMarkup(keyboard=[
    # [
    #     KeyboardButton(text="Telefon raqamğŸ“±", request_contact=True)
    # ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
],
    resize_keyboard=True
)

vacancy_marry_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Oilali"),
        KeyboardButton(text="Ajrashgan")
    ],
    [
        KeyboardButton(text="Turmush qurmagan")
    ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
],
    one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang"
)

vacancy_student_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Ha talabaman"),
        KeyboardButton(text="Yo'q talaba emasman")
    ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
],
    one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang"
)

vacancy_language_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Boshlang'ich"),
        KeyboardButton(text="O'rtacha")
    ],
    [
        KeyboardButton(text="Yuqori"),
        KeyboardButton(text="Master")
    ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
], one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang")

vacancy_price_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="ğŸ’µ 1-2 million"),
        KeyboardButton(text="ğŸ’µ 2-3 million")
    ],
    [
        KeyboardButton(text="ğŸ’µ 3-4 million"),
        KeyboardButton(text="ğŸ’µ 5-7 million")
    ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
],
    one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang"
)

finish_information_vacancy_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Tugatish")
    ],
    [
        KeyboardButton(text="ğŸ”¼Menyu"),
        KeyboardButton(text="Orqagaâ†©ï¸")
    ]
], one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Bottomlardan bitini tanlang")

back_to_menu_keyboard = ReplyKeyboardMarkup(keyboard=[
    [
        KeyboardButton(text="Menyuga qaytishâ†©")
    ]
], one_time_keyboard=True, resize_keyboard=True, input_field_placeholder="Menyuga qayting")


start_inline = InlineKeyboardMarkup(inline_keyboard=[
    [

        InlineKeyboardButton(
            text="O'zbek tiliğŸ‡ºğŸ‡¿",
            callback_data='uzb'
        ),

        InlineKeyboardButton(
            text="Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹ĞºğŸ‡·ğŸ‡º",
            callback_data='rus'
        )
    ]
], one_time_keyboard=True)

menu_uzb_inline = InlineKeyboardMarkup(inline_keyboard=[
    [
        InlineKeyboardButton(
            text="ğŸ“ƒVakansiyalar ",
            callback_data='vacancy'
        )
    ],
    [
        InlineKeyboardButton(
            text="â•Biz haqimizda",
            callback_data='about_uzb'
        ),
        InlineKeyboardButton(
            text="âš™Sozlamalar",
            callback_data='settings_uzb'
        )
    ],
    [
        InlineKeyboardButton(
            text="ğŸ“Tilni o'zgartirish",
            callback_data='edit_language'
        )
    ]
], one_time_keyboard=True)

vacancy_menu_inline = InlineKeyboardMarkup(inline_keyboard=[
    [
        InlineKeyboardButton(text="Kassir ğŸ’°", callback_data='cashier'),
        InlineKeyboardButton(text="Farrosh ğŸ§¹", callback_data='cleaner')
    ],
    [
        InlineKeyboardButton(text="Meva va sabzavotlar sotuvchisi ğŸ¤", callback_data='fruit_seller')
    ],
    [
        InlineKeyboardButton(text="Sotuvchi ğŸ¤", callback_data='seller'),
        InlineKeyboardButton(text="Yuk Tashuvchi ğŸšš", callback_data='carrier')
    ],
    [
        InlineKeyboardButton(text="ğŸ”¼Bosh Menyu", callback_data='menu')
    ]
], one_time_keyboard=True)


again_vacancy_inline = InlineKeyboardMarkup(inline_keyboard=[
    [
        # InlineKeyboardButton(text="Ariza topshirish", callback_data='vacancy'),
        InlineKeyboardButton(text="Orqaga qaytish", callback_data='menu')
    ]
], one_time_keyboard=True)



# id_user = None

async def get_start(message: Message, bot: Bot):
    await set_commands(bot)
    await message.answer(f"Davom etish uchun tilni tanlang \n"
                         f"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ \n", reply_markup=start_inline)
    await message.delete()


async def get_again_start(call: CallbackQuery, bot: Bot):
    await set_commands(bot)
    await call.message.answer(f"Qaytatdan davom etish uchun tilni tanlang \n\n"
                              f"ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ° \n\n",
                              reply_markup=start_inline)
    await call.message.delete()


async def get_settings(call: CallbackQuery):
    await call.answer("Kechirasiz bu sahifa hali tayyor emas")


async def get_about(call: CallbackQuery):
    await call.answer("Kechirasiz bu sahifa hali tayyor emas")


async def get_menu(call: CallbackQuery, bot: Bot, state: FSMContext):
    await call.message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
    await call.message.delete()


async def get_vacancies(call: CallbackQuery, bot: Bot):
    if Vacancy.id != call.message.chat.id:
        await call.message.answer("<b>Sizni qiziqtirgan vakansiyani tanlang ğŸ’¼</b>", reply_markup=vacancy_menu_inline)
    else:
        await call.message.answer("<b>Siz ariza topshirgansiz, qaytatdan ariza topshirasizmi?</b>\n"
                                  "Inlinelardan birini tanlangğŸ‘‡ ",
                                  reply_markup=again_vacancy_inline)
    await call.message.delete()


async def check_vacancy_register(call: CallbackQuery, bot: Bot):
    if Vacancy.id:
        if Vacancy.id == call.message.from_user.id:
            await call.message.answer("Davom ettirish")


async def get_vacancy(call: CallbackQuery, bot: Bot, state: FSMContext):
    if call.data == "cashier":
        await state.update_data(job="Kassir ğŸ’°")
        await call.message.answer_photo("https://s-english.ru/images/lilovik-2/kassir5.jpg", vacancy_job_text,
                                        reply_markup=start_vacancy_keyboard)
    if call.data == "cleaner":
        await state.update_data(job="Farrosh ğŸ§¹")
        await call.message.answer_photo(
            "https://www.betterteam.com/images/janitor-interview-questions-3210x4815-20201211.jpeg?crop=1:1,smart&width=1200&dpr=2",
            vacancy_job_text, reply_markup=start_vacancy_keyboard)
    if call.data == "fruit_seller":
        await state.update_data(job="Meva va sabzavotlar sotuvchisi ğŸ¤")
        await call.message.answer_photo(
            "https://mir-s3-cdn-cf.behance.net/project_modules/fs/90376b149274795.6303d4039016c.png", vacancy_job_text,
            reply_markup=start_vacancy_keyboard)
    if call.data == "seller":
        await state.update_data(job="Sotuvchi ğŸ¤")
        await call.message.answer_photo(
            "https://www.shutterstock.com/shutterstock/photos/1339855676/display_1500/stock-photo-portrait-of-a-cheese-seller-in-uniform-standing-with-cheese-head-in-the-supermarket-1339855676.jpg",
            vacancy_job_text, reply_markup=start_vacancy_keyboard)
    if call.data == "carrier":
        await state.update_data(job="Yuk Tashuvchi ğŸšš")
        await call.message.answer_photo(
            "https://avatars.mds.yandex.net/i?id=88bdd6117ec58abd6e476ef3d49fdd6b14868be2-9147160-images-thumbs&n=13",
            vacancy_job_text, reply_markup=start_vacancy_keyboard)
    await state.set_state(Vacancy.start)
    await call.message.delete()


async def get_start_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text == "Boshlash":
        await message.answer(
            f"Pasportingiz bo'yicha familiyangizni ismingizni otasining ismini kiriting (masalan: <b>Falonchiyev Pistonchi Falonchiyevich</b>)",
            reply_markup=vacancy_keyboard)
        await state.set_state(Vacancy.name)
    else:
        await message.answer("Davom ettirmoqchi bo'lsangiz <b>Boshlash</b> bottomini bosing",
                             reply_markup=start_vacancy_keyboard)


async def get_name_vacancy(message: Message, bot: Bot, state: FSMContext):
    if len(message.text.split()) == 4 or len(message.text.split()) == 3:
        await state.update_data(name=message.text)
        await state.set_state(Vacancy.age)
        await message.answer(f"Tug'ilgan kuningizni kiriting ğŸ“… (masalan, <b>31.10.2002</b>):",
                             reply_markup=vacancy_keyboard)
    elif message.text == "Orqagaâ†©ï¸":
        await message.answer("<b>Sizni qiziqtirgan vakansiyani tanlang ğŸ’¼</b>", reply_markup=vacancy_menu_inline)
        await message.delete()
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer(
            "Noto'gri kiritildi, iltimos namunadagidek kiriting\n (masalan: <b>Falonchiyev Pistonchi Falonchiyevich</b>):")


async def get_age_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text[:2].isdigit() and message.text[3:5].isdigit() and message.text[6:10].isdigit() and len(
            message.text.split('.')) == 3 or len(message.text.split('/')) == 3:
        await state.update_data(age=message.text)
        await message.answer(
            "Yashash manzili ğŸ  viloyat/shahar(tuman)/kocha/raqam-uy (masalan: <b>Sirdaryo/Xovos/17-uy</b> ):")
        await state.set_state(Vacancy.location)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.name)
        await message.answer(
            f"Pasportingiz bo'yicha familiyangizni ismingizni otasining ismini kiriting (masalan: <b>Falonchiyev Pistonchi Falonchiyevich</b>)",
            reply_markup=vacancy_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Noto'gri kiritildi, iltimos namunadagidek kiriting\n ğŸ“… (masalan: 31.10.2002)")


async def get_location_vacancy(message: Message, bot: Bot, state: FSMContext):
    if len(message.text.split('/')) == 3 or len(message.text.split()) == 3:
        await state.update_data(location=message.text)
        await state.set_state(Vacancy.phone_number)
        await message.answer(
            "Kontakt telefon raqamingizni kiriting ğŸ“± misol: (<b>+998770001732</b> yoki <b>770001732</b>)",
            reply_markup=vacancy_phone_number_keyboard)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.age)
        await message.answer(f"Tug'ilgan kuningizni kiriting ğŸ“… (masalan, <b>31.10.2002</b>):")
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer(
            "Noto'gri kiritildi, iltimos namunadagidek kiriting\n (masalan: <b>Sirdaryo/Xovos/17-uy</b>)")


async def get_phone_number_vacancy(message: Message, bot: Bot, state: FSMContext):
    if (len(message.text) == 13 and message.text[0] == '+' and message.text[1:].isdigit()) or (
            len(message.text) == 9 and message.text.isdigit()):
        await state.update_data(phone_number=message.text)
        await message.answer("ğŸ’ Oilaviy ahvolingiz:", reply_markup=vacancy_marry_keyboard)
        await state.set_state(Vacancy.marry)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.location)
        await message.answer(
            "Yashash manzili ğŸ  viloyat/shahar(tuman)/kocha/raqam-uy (masalan: <b>Sirdaryo/Xovos/17-uy</b> ):")
        await state.set_state(Vacancy.location)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer(
            "Noto'gri kiritildi, iltimos namunadagidek kiriting ğŸ“± \nmisol: (<b>+998770001732</b> yoki <b>770001732</b>)",
            reply_markup=vacancy_phone_number_keyboard)


async def get_marry_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text in ('Oilali', 'Ajrashgan', 'Turmush qurmagan'):
        await state.update_data(marry=message.text)
        await message.answer("Siz ğŸ“ talabamisiz?", reply_markup=vacancy_student_keyboard)
        await state.set_state(Vacancy.is_student)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.phone_number)
        await message.answer(
            "Kontakt telefon raqamingizni kiriting ğŸ“± misol: (<b>+998770001732</b> yoki <b>770001732</b>)",
            reply_markup=vacancy_phone_number_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Noto'gri kiritildi, iltimos pastdagi bottomladan birini tanlash",
                             reply_markup=vacancy_marry_keyboard)


async def get_is_student_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text in ('Ha talabaman', "Yo'q talaba emasman"):
        await state.update_data(is_student=message.text)
        await message.answer("Rus tilini qanchalik darajada bilasiz? ğŸ‡·ğŸ‡º",
                             reply_markup=vacancy_language_keyboard)
        await state.set_state(Vacancy.language)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.marry)
        await message.answer("ğŸ’ Oilaviy ahvolingiz:", reply_markup=vacancy_marry_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Noto'gri kiritildi, iltimos pastdagi bottomladan birini tanlash",
                             reply_markup=vacancy_student_keyboard)


async def get_language_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text in ("Boshlang'ich", "O'rtacha", "Yuqori", "Master"):
        await state.update_data(language=message.text)
        await message.answer("ğŸ’¸ Kutilayotgan ish haqi miqdorini ko'rsating (<b>so'm</b>):",
                             reply_markup=vacancy_price_keyboard)
        await state.set_state(Vacancy.price)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.is_student)
        await message.answer("Siz ğŸ“ talabamisiz?", reply_markup=vacancy_student_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Noto'gri kiritildi, iltimos pastdagi bottomladan birini tanlash",
                             reply_markup=vacancy_language_keyboard)


async def get_price_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text in ("ğŸ’µ 1-2 million", "ğŸ’µ 2-3 million", "ğŸ’µ 3-4 million", "ğŸ’µ 5-7 million"):
        await state.update_data(price=message.text)
        await state.update_data(id=message.from_user.id)
        await message.answer("Suratingizni yuboring ğŸ¤µ (telefoningizdan selfi olishingiz mumkin)",
                             reply_markup=vacancy_keyboard)
        await state.set_state(Vacancy.image)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.language)
        await message.answer("Rus tilini qanchalik darajada bilasiz? ğŸ‡·ğŸ‡º",
                             reply_markup=vacancy_language_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Noto'gri kiritildi, iltimos pastdagi bottomladan birini tanlash",
                             reply_markup=vacancy_price_keyboard)


async def get_image_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.photo is not None:
        await state.update_data(image=message.photo)
        await message.answer("Tugatish", reply_markup=finish_information_vacancy_keyboard)
        await state.set_state(Vacancy.finish)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.price)
        await message.answer("ğŸ’¸ Kutilayotgan ish haqi miqdorini ko'rsating (<b>so'm</b>):",
                             reply_markup=vacancy_price_keyboard)
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("Iltimos rasmingizni yuboring")


async def get_finish_vacancy(message: Message, bot: Bot, state: FSMContext):
    if message.text == "Tugatish":
        data = await state.get_data()
        # Vacancy.id = message.from_user.id
        finish_cashier_information_text = (
            f"<b>VakansiyağŸ’¼:</b> {data.get('job')}\n"
            f"<b>Username:</b>@{message.from_user.username}\n"
            f"<b>User id:</b> {data.get('id')}\n"
            f"<b>To'liq ismi:</b> {data.get('name')}\n"
            f"<b>Tug'ilgan sanasi:</b> {data.get('age')} yil\n"
            f"<b>Turar joy manzili:</b> {data.get('location')}\n"
            f"<b>Telefon raqamiğŸ“±:</b> {data.get('phone_number')}\n"
            f"<b>ğŸ’ Oilaviy ahvoli:</b> {data.get('marry')}\n"
            f"<b>Talaba:</b> {data.get('is_student')} âœ…\n"
            f"<b>Rus tili darajasi:</b> {data.get('language')}\n"
            f"<b>Kutilayotgan ish haqi darajasi:</b> {data.get('price')}\n"
            f"<b>ğŸ¤µAsosiy surat:</b> {message.from_user.id} photo\n")
        await bot.send_message(2101536145, f"<b>Yangi ariza</b>\n {finish_cashier_information_text}")
        await message.answer(f"<b>Arizangiz qabul qilindi!</b>", reply_markup=back_to_menu_keyboard)
        await state.set_state(Vacancy.menu)
    elif message.text == "Orqagaâ†©ï¸":
        await state.set_state(Vacancy.image)
        await message.answer("Suratingizni yuboring ğŸ¤µ (telefoningizdan selfi olishingiz mumkin)")
    elif message.text == "ğŸ”¼Menyu":
        await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)
        await message.delete()
    else:
        await message.answer("<b>Noto'gri kiritildi, iltimos pastdagi bottomladan birini tanlash<b>",
                             reply_markup=finish_information_vacancy_keyboard)


async def get_to_menu(message: Message):
    await message.answer("<b>Quyidagilardan birini tanlang</b>", reply_markup=menu_uzb_inline)


async def set_commands(bot: Bot):
    commands = [
        BotCommand(command="start", description="Boshlash"),
        BotCommand(command="help", description="Yordam"),
        # BotCommand(command="cancel", description="O'chirish"),
        # BotCommand(command="inline", description="Inline tugmalarini ko'rsatish")
    ]

    await bot.set_my_commands(commands, BotCommandScopeDefault())

logging.basicConfig(level=logging.INFO)
bot = Bot(token=settings.bots.bot_token, parse_mode='html')
dp = Dispatcher()
dp.message.register(get_start, F.text == '/start')
dp.message.register(set_commands, Command(commands='inline'))
dp.callback_query.register(get_menu, F.data.startswith('uzb'))
dp.callback_query.register(get_menu, F.data.startswith('menu'))
dp.callback_query.register(get_again_start, F.data.startswith('edit_language'))
dp.callback_query.register(get_settings, F.data.startswith('settings_uzb'))
dp.callback_query.register(get_about, F.data.startswith('about_uzb'))
dp.callback_query.register(get_vacancies, F.data.startswith('vacancy'))
dp.callback_query.register(get_vacancy, F.data.startswith('cashier'))
dp.callback_query.register(get_vacancy, F.data.startswith('cleaner'))
dp.callback_query.register(get_vacancy, F.data.startswith('fruit_seller'))
dp.callback_query.register(get_vacancy, F.data.startswith('seller'))
dp.callback_query.register(get_vacancy, F.data.startswith('carrier'))
# dp.message.register(get_start_vacancy, F.text == 'Boshlash')
dp.message.register(get_start_vacancy, Vacancy.start)
dp.message.register(get_name_vacancy, Vacancy.name)
dp.message.register(get_age_vacancy, Vacancy.age)
dp.message.register(get_location_vacancy, Vacancy.location)
dp.message.register(get_phone_number_vacancy, Vacancy.phone_number)
dp.message.register(get_marry_vacancy, Vacancy.marry)
dp.message.register(get_is_student_vacancy, Vacancy.is_student)
dp.message.register(get_language_vacancy, Vacancy.language)
dp.message.register(get_price_vacancy, Vacancy.price)
dp.message.register(get_image_vacancy, Vacancy.image)
dp.message.register(get_finish_vacancy, Vacancy.finish)
dp.message.register(get_to_menu, Vacancy.menu)


async def main():
    await dp.start_polling(bot)


if __name__ == "__main__":
    asyncio.run(main())
